<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Timeclock</title>
  <style>
    html, body {
      height: 100%;
    }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }
  </style>
</head>
<body>
  <pre></pre>
  <script type="module">
    // import {html, render} from './node_modules/lit-html/lit-html.js';
    import {html, render} from 'https://unpkg.com/lit-html?module';

    const template = (name) => html`<p>Hello ${name}</p>`;
    render(template('World'), document.body);

    const socket = new WebSocket(`ws://${window.location.host}/socket`);

    const pre = document.querySelector('pre');

    socket.onmessage = (e) => {
      const data = JSON.parse(e.data);

      if (data.shifts) {
        for (const shift of data.shifts) {
          shift['StartDate'] = new Date(shift['StartDate']);
          shift['EndDate'] = shift['EndDate'] ? new Date(shift['EndDate']) : null;
        }
      }
      console.log(data);
      pre.textContent = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>
